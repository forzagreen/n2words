#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo ""
echo "üßπ Running pre-commit checks..."
echo ""

if ! npx lint-staged 2>&1; then
  EXIT_CODE=$?
  echo ""
  echo "‚ùå Pre-commit checks failed!"
  echo ""
  echo "Common issues and fixes:"
  echo ""
  echo "JavaScript/Linting errors:"
  echo "  ‚Ä¢ Run: npm run lint:js -- --fix"
  echo "  ‚Ä¢ Or manually fix the issues shown above"
  echo ""
  echo "Markdown errors:"
  echo "  ‚Ä¢ Run: npm run lint:md -- --fix"
  echo "  ‚Ä¢ Or manually fix markdown formatting"
  echo ""
  echo "Language validation errors:"
  echo "  ‚Ä¢ Run: npm run lang:validate -- <code> --verbose"
  echo "  ‚Ä¢ Check that language implementation follows conventions"
  echo ""
  echo "üí° Tip: Run 'npm run lint:fix' to auto-fix most issues"
  echo ""
  exit $EXIT_CODE
fi

echo ""
echo "‚úÖ All pre-commit checks passed!"
echo ""
