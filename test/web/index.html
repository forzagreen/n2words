<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>n2words Browser Test Suite</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .test-case {
        margin: 10px 0;
      }
      .pass {
        color: green;
      }
      .fail {
        color: red;
      }
      #status {
        font-weight: bold;
        font-size: 18px;
        margin: 20px 0;
      }
      #results {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px 0;
        font-family: monospace;
      }
    </style>
  </head>

  <body>
    <h1>n2words Browser Compatibility Test Suite</h1>
    <div id="status">Running tests...</div>
    <div id="results"></div>
  </body>
  <script src="../../dist/n2words.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOMContentLoaded: n2words loaded:', typeof n2words);
      console.log('DOMContentLoaded: n2words.EnglishConverter:', typeof n2words.EnglishConverter);
    });
    window.onload = () => {
      console.log('window.onload: Starting tests');
      console.log('window.onload: n2words available:', typeof n2words);

      try {
        const testResult = n2words.EnglishConverter(5);
        console.log('Test conversion n2words.EnglishConverter(5):', testResult);
      } catch (error) {
        console.error('Error in test conversion:', error);
        document.getElementById('status').innerHTML = 'Error: ' + error.message;
        return;
      }
      const results = document.getElementById('results');
      const status = document.getElementById('status');
      let passCount = 0;
      let failCount = 0;
      let output = '';

      function test(description, expected, actual) {
        const passed = actual === expected;
        const symbol = passed ? '✓' : '✗';
        const className = passed ? 'pass' : 'fail';

        output += `<div class="test-case ${className}">${symbol} ${description}</div>`;
        output += `<div class="test-case">   Expected: "${expected}", Got: "${actual}"</div>`;

        if (passed) {
          passCount++;
        } else {
          failCount++;
        }
      }

      // Basic number tests
      test('Basic: EnglishConverter(1)', 'one', n2words.EnglishConverter(1));
      test('Basic: EnglishConverter(0)', 'zero', n2words.EnglishConverter(0));
      test('Basic: EnglishConverter(42)', 'forty-two', n2words.EnglishConverter(42));
      test('Basic: EnglishConverter(100)', 'one hundred', n2words.EnglishConverter(100));
      test('Basic: EnglishConverter(1000)', 'one thousand', n2words.EnglishConverter(1000));
      test(
        'Basic: EnglishConverter(1234)',
        'one thousand two hundred and thirty-four',
        n2words.EnglishConverter(1234),
      );

      // Negative numbers
      test('Negative: EnglishConverter(-1)', 'minus one', n2words.EnglishConverter(-1));
      test('Negative: EnglishConverter(-42)', 'minus forty-two', n2words.EnglishConverter(-42));

      // Large numbers
      test('Large: EnglishConverter(1000000)', 'one million', n2words.EnglishConverter(1000000));
      test(
        'Large: EnglishConverter(1234567)',
        'one million two hundred and thirty-four thousand five hundred and sixty-seven',
        n2words.EnglishConverter(1234567),
      );

      // String input
      test(
        'String: EnglishConverter("123")',
        'one hundred and twenty-three',
        n2words.EnglishConverter('123'),
      );

      // Decimal numbers
      test('Decimal: EnglishConverter("3.14")', 'three point fourteen', n2words.EnglishConverter('3.14'));
      test('Decimal: EnglishConverter("0.5")', 'zero point five', n2words.EnglishConverter('0.5'));

      // Different language converters (Spanish)
      test(
        'Spanish: SpanishConverter(1)',
        'uno',
        n2words.SpanishConverter(1),
      );
      test(
        'Spanish: SpanishConverter(42)',
        'cuarenta y dos',
        n2words.SpanishConverter(42),
      );
      test(
        'Spanish: SpanishConverter(100)',
        'cien',
        n2words.SpanishConverter(100),
      );

      // Different language converters (French)
      test(
        'French: FrenchConverter(1)',
        'un',
        n2words.FrenchConverter(1),
      );
      test(
        'French: FrenchConverter(42)',
        'quarante-deux',
        n2words.FrenchConverter(42),
      );
      test(
        'French: FrenchConverter(100)',
        'cent',
        n2words.FrenchConverter(100),
      );

      // Different language converters (German)
      test(
        'German: GermanConverter(1)',
        'eins',
        n2words.GermanConverter(1),
      );
      test(
        'German: GermanConverter(42)',
        'zweiundvierzig',
        n2words.GermanConverter(42),
      );

      // Edge cases
      test(
        'BigInt: EnglishConverter(BigInt(123))',
        'one hundred and twenty-three',
        n2words.EnglishConverter(BigInt(123)),
      );

      // Error handling - invalid inputs should throw or return reasonable defaults
      try {
        const result = n2words.EnglishConverter('invalid');
        test(
          'Invalid input handling',
          'Error thrown',
          'Unexpected success: ' + result,
        );
      } catch (e) {
        test(
          'Invalid input handling',
          'Error thrown: Invalid number format: "invalid"',
          'Error thrown: ' + e.message,
        );
      }

      // Multiple language converters available
      test('EnglishConverter(5)', 'five', n2words.EnglishConverter(5));
      test('SpanishConverter(5)', 'cinco', n2words.SpanishConverter(5));
      test('FrenchConverter(5)', 'cinq', n2words.FrenchConverter(5));

      // Update results and status
      results.innerHTML = output;

      const totalTests = passCount + failCount;
      if (failCount === 0) {
        status.innerHTML = `Complete: All tests passed (${passCount}/${totalTests})`;
        status.className = 'pass';
      } else {
        status.innerHTML = `Complete: ${failCount} test(s) failed (${passCount}/${totalTests} passed)`;
        status.className = 'fail';
      }
    };
  </script>
</html>
